# API-002: Get Execution

## Metadata
- **ID**: API-002
- **Created**: 2025-12-26
- **Status**: Approved

## Endpoint
- **Method**: GET
- **Path**: `/api/v1/executions/{id}`
- **Authentication**: Required (API Key or JWT)

## Description
특정 실행의 상세 정보를 조회합니다.

## Request

### Headers
| Header | Required | Description |
|--------|----------|-------------|
| Authorization | Yes | `Bearer {token}` or `ApiKey {key}` |

### Path Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| id | UUID | Yes | 실행 ID |

### Query Parameters
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| includeArtifacts | boolean | No | 아티팩트 목록 포함 여부 (기본: false) |
| includeTransitions | boolean | No | 상태 전환 이력 포함 여부 (기본: false) |

## Response

### Success (200 OK)
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "COMPLETED",
  "jobName": "claude-agent-550e8400",
  "podName": "claude-agent-550e8400-xyz12",

  "prompt": "주어진 코드베이스를 분석하고 README.md를 생성해주세요.",
  "model": "claude-sonnet-4-20250514",
  "maxTokens": 8192,
  "metadata": {
    "project": "my-project"
  },

  "createdAt": "2025-12-26T10:00:00Z",
  "startedAt": "2025-12-26T10:00:05Z",
  "completedAt": "2025-12-26T10:02:30Z",
  "updatedAt": "2025-12-26T10:02:30Z",

  "result": {
    "output": "# My Project\n\n## Overview\n...",
    "tokensUsed": 4521,
    "inputTokens": 1234,
    "outputTokens": 3287,
    "estimatedCost": 0.0245
  },

  "artifacts": [
    {
      "id": "artifact-uuid-1",
      "fileName": "README.md",
      "fileSize": 2048,
      "mimeType": "text/markdown",
      "type": "DOCUMENT",
      "createdAt": "2025-12-26T10:02:25Z"
    }
  ],

  "statusTransitions": [
    {
      "fromStatus": null,
      "toStatus": "PENDING",
      "transitionedAt": "2025-12-26T10:00:00Z"
    },
    {
      "fromStatus": "PENDING",
      "toStatus": "RUNNING",
      "transitionedAt": "2025-12-26T10:00:05Z"
    },
    {
      "fromStatus": "RUNNING",
      "toStatus": "COMPLETED",
      "transitionedAt": "2025-12-26T10:02:30Z"
    }
  ]
}
```

### Failed Execution Response
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "status": "FAILED",
  "jobName": "claude-agent-550e8401",

  "prompt": "...",
  "model": "claude-sonnet-4-20250514",

  "createdAt": "2025-12-26T11:00:00Z",
  "startedAt": "2025-12-26T11:00:05Z",
  "completedAt": "2025-12-26T11:00:30Z",

  "error": {
    "code": "AGENT_TIMEOUT",
    "message": "Agent execution timed out after 1800 seconds",
    "details": {
      "lastActivity": "2025-12-26T11:30:00Z"
    }
  }
}
```

### Error Codes
| Code | HTTP Status | Description |
|------|-------------|-------------|
| NOT_FOUND | 404 | 실행을 찾을 수 없음 |
| UNAUTHORIZED | 401 | 인증 실패 |
| FORBIDDEN | 403 | 권한 없음 |
| INTERNAL_ERROR | 500 | 서버 내부 오류 |

### Error Response Example
```json
{
  "error": {
    "code": "NOT_FOUND",
    "message": "Execution not found",
    "details": {
      "id": "550e8400-e29b-41d4-a716-446655440000"
    }
  },
  "requestId": "req-123456"
}
```

## Related Specs
- FEAT-002
- FEAT-003
- DATA-001

---

## Change History

| Date | Author | Description |
|------|--------|-------------|
| 2025-12-26 | System | Initial creation |
