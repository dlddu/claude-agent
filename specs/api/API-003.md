# API-003: List Executions

## Metadata
- **ID**: API-003
- **Created**: 2025-12-26
- **Status**: Approved

## Endpoint
- **Method**: GET
- **Path**: `/api/v1/executions`
- **Authentication**: Required (API Key or JWT)

## Description
실행 목록을 조회합니다. 필터링, 정렬, 페이지네이션을 지원합니다.

## Request

### Headers
| Header | Required | Description |
|--------|----------|-------------|
| Authorization | Yes | `Bearer {token}` or `ApiKey {key}` |

### Query Parameters
| Parameter | Type | Required | Description | Default |
|-----------|------|----------|-------------|---------|
| page | number | No | 페이지 번호 (1-based) | 1 |
| pageSize | number | No | 페이지 크기 (1-100) | 20 |
| sortBy | string | No | 정렬 기준 (createdAt, completedAt, status) | createdAt |
| sortOrder | string | No | 정렬 순서 (asc, desc) | desc |
| status | string | No | 상태 필터 (comma-separated) | - |
| createdAfter | ISO8601 | No | 생성 시간 시작 | - |
| createdBefore | ISO8601 | No | 생성 시간 종료 | - |
| model | string | No | 모델 필터 | - |
| hasArtifacts | boolean | No | 아티팩트 유무 필터 | - |
| search | string | No | 프롬프트 검색 (부분 일치) | - |

### Example Request
```
GET /api/v1/executions?page=1&pageSize=10&status=COMPLETED,FAILED&sortBy=createdAt&sortOrder=desc
```

## Response

### Success (200 OK)
```json
{
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "status": "COMPLETED",
      "jobName": "claude-agent-550e8400",
      "prompt": "주어진 코드베이스를 분석하고...",
      "model": "claude-sonnet-4-20250514",
      "createdAt": "2025-12-26T10:00:00Z",
      "completedAt": "2025-12-26T10:02:30Z",
      "tokensUsed": 4521,
      "artifactCount": 1
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "status": "FAILED",
      "jobName": "claude-agent-550e8401",
      "prompt": "API 문서를 생성해주세요...",
      "model": "claude-sonnet-4-20250514",
      "createdAt": "2025-12-26T09:00:00Z",
      "completedAt": "2025-12-26T09:30:00Z",
      "errorCode": "AGENT_TIMEOUT",
      "artifactCount": 0
    }
  ],
  "pagination": {
    "page": 1,
    "pageSize": 10,
    "total": 42,
    "totalPages": 5,
    "hasNext": true,
    "hasPrev": false
  }
}
```

### Response Fields

#### Execution Summary
| Field | Type | Description |
|-------|------|-------------|
| id | UUID | 실행 ID |
| status | string | 현재 상태 |
| jobName | string | K8s Job 이름 |
| prompt | string | 프롬프트 (truncated to 200 chars) |
| model | string | 사용된 모델 |
| createdAt | ISO8601 | 생성 시간 |
| startedAt | ISO8601 | 시작 시간 |
| completedAt | ISO8601 | 완료 시간 |
| tokensUsed | number | 사용된 토큰 (완료된 경우) |
| errorCode | string | 에러 코드 (실패한 경우) |
| artifactCount | number | 아티팩트 수 |

#### Pagination
| Field | Type | Description |
|-------|------|-------------|
| page | number | 현재 페이지 |
| pageSize | number | 페이지 크기 |
| total | number | 전체 항목 수 |
| totalPages | number | 전체 페이지 수 |
| hasNext | boolean | 다음 페이지 존재 여부 |
| hasPrev | boolean | 이전 페이지 존재 여부 |

### Error Codes
| Code | HTTP Status | Description |
|------|-------------|-------------|
| VALIDATION_ERROR | 400 | 잘못된 쿼리 파라미터 |
| UNAUTHORIZED | 401 | 인증 실패 |
| INTERNAL_ERROR | 500 | 서버 내부 오류 |

## Related Specs
- FEAT-003
- DATA-001

---

## Change History

| Date | Author | Description |
|------|--------|-------------|
| 2025-12-26 | System | Initial creation |
